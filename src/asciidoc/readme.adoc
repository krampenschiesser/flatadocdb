# FlatAdocDB

## Main goals

* Store asciidoctor and other text/json files hierarchical in the file system
* Storage has to be *Atomic* and *Isolated*, Consistency and Durability are not the main goals( After close of stream I hope that it is written to the FS, as there are (almost) no relations, consistency is no issue either)
* In process database
* Support versioning via GIT(jgit), including support for submodules to get a distributed storage that can be synced
* Support searching via apache lucene
* Provide an easy to use API similar to the JPA EntityManager

## JTA integration

In order to integrate with application servers FlatAdocDB uses JTA.
There are 2 main entry points:

* The JTATransactionProvider, this class has to be implemented by users in order to provide the current JTA transaction to FlatAdocDB
** It is resolved via the Java https://docs.oracle.com/javase/8/docs/api/java/util/ServiceLoader.html[ServiceLoader] infrastructure
* The JTATransactionSynchronizationRegistryProvider which uses the jndi lookup for *java:comp/TransactionSynchronizationRegistry* to get the registry

## Usage without JTA

Generally if the jndi lookup for the TransactionSynchronizationRegistry fails we fall back to our own transaction management.
